(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[460],{654:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var r=a(2512);let s=0,i=new Map,d=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=[],l={toasts:[]};function o(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?d(a):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),n.forEach(e=>{e(l)})}function c(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(l);return r.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},4038:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>y});var r=a(8636),s=a(654),i=a(2512),d=a(3836),n=a(9895),l=a(2992),o=a(5029);let c=d.Kq,u=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.LM,{ref:t,className:(0,o.cn)("fixed top-0 z-100 flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...s})});u.displayName=d.LM.displayName;let f=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-(--radix-toast-swipe-end-x) data-[swipe=move]:translate-x-(--radix-toast-swipe-move-x) data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m=i.forwardRef((e,t)=>{let{className:a,variant:s,...i}=e;return(0,r.jsx)(d.bL,{ref:t,className:(0,o.cn)(f({variant:s}),a),...i})});m.displayName=d.bL.displayName,i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.rc,{ref:t,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-hidden focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 hover:group-[.destructive]:border-destructive/30 hover:group-[.destructive]:bg-destructive hover:group-[.destructive]:text-destructive-foreground focus:group-[.destructive]:ring-destructive",a),...s})}).displayName=d.rc.displayName;let x=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.bm,{ref:t,className:(0,o.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-hidden focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 hover:group-[.destructive]:text-red-50 focus:group-[.destructive]:ring-red-400 focus:group-[.destructive]:ring-offset-red-600",a),"toast-close":"",...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=d.bm.displayName;let p=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.hE,{ref:t,className:(0,o.cn)("text-sm font-semibold [&+div]:text-xs",a),...s})});p.displayName=d.hE.displayName;let h=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.VY,{ref:t,className:(0,o.cn)("text-sm opacity-90",a),...s})});function y(){let{toasts:e}=(0,s.dj)();return(0,r.jsxs)(c,{children:[e.map(function(e){let{id:t,title:a,description:s,action:i,...d}=e;return(0,r.jsxs)(m,{...d,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[a&&(0,r.jsx)(p,{children:a}),s&&(0,r.jsx)(h,{children:s})]}),i,(0,r.jsx)(x,{})]},t)}),(0,r.jsx)(u,{})]})}h.displayName=d.VY.displayName},5029:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(6239),s=a(4398);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},6051:(e,t,a)=>{Promise.resolve().then(a.bind(a,7061))},7061:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>G});var r=a(8636),s=a(2512),i=a(1174),d=a(8069),n=a.n(d),l=a(9895),o=a(5029);let c=(0,l.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-sm hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)(c({variant:a}),t),...s})}let f=e=>{let{variant:t="swirl",color:a="#dd8448",title:i="Original",availability:d="Available",image:l,flag:o,width:c="22rem",aspectRatio:f="7 / 10",className:m=""}=e,x=(0,s.useMemo)(()=>{let e=Math.random().toString(36).slice(2,8);return{swirl:"swirl-".concat(e),hue:"hue-".concat(e)}},[]),p="hue"===t?"url(#".concat(x.hue,")"):"url(#".concat(x.swirl,")");return(0,r.jsxs)("div",{suppressHydrationWarning:!0,className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" "+"ec-wrap ".concat(m),children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" svg-container",children:(0,r.jsxs)("defs",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:[(0,r.jsxs)("filter",{id:x.swirl,colorInterpolationFilters:"sRGB",x:"-20%",y:"-20%",width:"140%",height:"140%",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:[(0,r.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"2",result:"noise1",seed:"1",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feOffset",{in:"noise1",dx:"0",dy:"0",result:"offsetNoise1",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:(0,r.jsx)("animate",{attributeName:"dy",values:"700; 0",dur:"6s",repeatCount:"indefinite",calcMode:"linear",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})}),(0,r.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"2",result:"noise2",seed:"1",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feOffset",{in:"noise2",dx:"0",dy:"0",result:"offsetNoise2",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:(0,r.jsx)("animate",{attributeName:"dy",values:"0; -700",dur:"6s",repeatCount:"indefinite",calcMode:"linear",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})}),(0,r.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"2",result:"noise3",seed:"2",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feOffset",{in:"noise3",dx:"0",dy:"0",result:"offsetNoise3",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:(0,r.jsx)("animate",{attributeName:"dx",values:"490; 0",dur:"6s",repeatCount:"indefinite",calcMode:"linear",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})}),(0,r.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"2",result:"noise4",seed:"2",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feOffset",{in:"noise4",dx:"0",dy:"0",result:"offsetNoise4",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:(0,r.jsx)("animate",{attributeName:"dx",values:"0; -490",dur:"6s",repeatCount:"indefinite",calcMode:"linear",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})}),(0,r.jsx)("feComposite",{in:"offsetNoise1",in2:"offsetNoise2",result:"part1",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feComposite",{in:"offsetNoise3",in2:"offsetNoise4",result:"part2",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feBlend",{in:"part1",in2:"part2",mode:"color-dodge",result:"combinedNoise",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"combinedNoise",scale:"30",xChannelSelector:"R",yChannelSelector:"B",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})]}),(0,r.jsxs)("filter",{id:x.hue,colorInterpolationFilters:"sRGB",x:"-20%",y:"-20%",width:"140%",height:"140%",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:[(0,r.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:"7",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feColorMatrix",{type:"hueRotate",result:"pt1",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:(0,r.jsx)("animate",{attributeName:"values",values:"0;360;",dur:".6s",repeatCount:"indefinite",calcMode:"paced",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})}),(0,r.jsx)("feComposite",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.03",numOctaves:"7",seed:"5",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feColorMatrix",{type:"hueRotate",result:"pt2",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]]),children:(0,r.jsx)("animate",{attributeName:"values",values:"0; 333; 199; 286; 64; 168; 256; 157; 360;",dur:"5s",repeatCount:"indefinite",calcMode:"paced",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})}),(0,r.jsx)("feBlend",{in:"pt1",in2:"pt2",mode:"normal",result:"combinedNoise",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])}),(0,r.jsx)("feDisplacementMap",{in:"SourceGraphic",scale:"30",xChannelSelector:"R",yChannelSelector:"B",className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])})]})]})}),(0,r.jsxs)("div",{style:{"--electric-border-color":a,"--f":p},className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" card-container",children:[(0,r.jsxs)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" inner-container",children:[(0,r.jsx)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" border-outer",children:(0,r.jsxs)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" main-card",children:[l&&(0,r.jsx)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" image-container",children:l}),o&&(0,r.jsx)("p",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" mb-5 bg-green-700 text-green-100 p-2 rounded-md",children:o})]})}),(0,r.jsx)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" glow-layer-1"}),(0,r.jsx)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" glow-layer-2"})]}),(0,r.jsx)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" content-container ",children:(0,r.jsxs)("div",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" content-top",children:[(0,r.jsx)("p",{className:n().dynamic([["a5e50fd73dfddb47",[c,f]]])+" title",children:i}),"Available"===d&&(0,r.jsx)(u,{variant:"default",className:"bg-green-700 text-green-100",children:d}),"Forgotten"===d&&(0,r.jsx)(u,{variant:"destructive",className:"bg-red-700 text-red-100",children:d})]})})]}),(0,r.jsx)(n(),{id:"a5e50fd73dfddb47",dynamic:[c,f],children:".__jsx-style-dynamic-selector:root{--color-neutral-900:oklch(0.185 0 0)}.ec-wrap.__jsx-style-dynamic-selector{position:relative;display:inline-block;color-scheme:light dark;z-index:20}.svg-container.__jsx-style-dynamic-selector{position:absolute;width:0;height:0;z-index:20}.card-container.__jsx-style-dynamic-selector{padding:2px;border-radius:1.5em;position:relative;--electric-light-color:oklch(from var(--electric-border-color) l c h);--gradient-color:oklch(from var(--electric-border-color) 0.3 calc(c / 2) h / 0.4);background:linear-gradient(-30deg,var(--gradient-color),transparent,var(--gradient-color)),linear-gradient(to bottom,var(--color-neutral-900),var(--color-neutral-900));color:oklch(.985 0 0);z-index:10}.inner-container.__jsx-style-dynamic-selector{position:relative}.main-card.__jsx-style-dynamic-selector{width:".concat(c,";aspect-ratio:").concat(f,";border-radius:1.5em;border:2px solid var(--electric-border-color);margin-top:-4px;margin-left:-4px;filter:var(--f);background:oklch(.145 0 0)}.glow-layer-1.__jsx-style-dynamic-selector,.glow-layer-2.__jsx-style-dynamic-selector,.overlay-1.__jsx-style-dynamic-selector,.overlay-2.__jsx-style-dynamic-selector,.background-glow.__jsx-style-dynamic-selector{border-radius:24px;position:absolute;top:0;left:-10px;right:0;bottom:0;z-index:10}.overlay-1.__jsx-style-dynamic-selector,.overlay-2.__jsx-style-dynamic-selector{mix-blend-mode:overlay;transform:scale(1.1);filter:blur(16px);background:linear-gradient(-30deg,white,transparent 30%,transparent 70%,white);z-index:10}.overlay-1.__jsx-style-dynamic-selector{opacity:1}.overlay-2.__jsx-style-dynamic-selector{opacity:.5}.background-glow.__jsx-style-dynamic-selector{filter:blur(32px);transform:scale(2.2);opacity:.3;z-index:10;background:linear-gradient(-30deg,var(--electric-light-color),transparent,var(--electric-border-color))}.content-container.__jsx-style-dynamic-selector{position:absolute;inset:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:end}.image-container.__jsx-style-dynamic-selector{flex:1;width:100%;overflow:hidden;border-radius:1.3em;display:flex;align-items:start;justify-content:center;z-index:1}.content-top.__jsx-style-dynamic-selector{display:flex;flex-direction:column;padding:16px;justify-content:center;align-items:center}.title.__jsx-style-dynamic-selector{font-size:1.2em;font-weight:500;text-align:center;line-height:1.2;margin-bottom:8px}")})]})};var m=a(6467);let x=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:d=!1,...n}=e,l=d?m.DX:"button";return(0,r.jsx)(l,{className:(0,o.cn)(x({variant:s,size:i,className:a})),ref:t,...n})});p.displayName="Button";var h=a(394);let y=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(h.bL,{ref:t,className:(0,o.cn)("relative overflow-hidden",a),...i,children:[(0,r.jsx)(h.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(b,{}),(0,r.jsx)(h.OK,{})]})});y.displayName=h.bL.displayName;let b=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...i}=e;return(0,r.jsx)(h.VM,{ref:t,orientation:s,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-px","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-px",a),...i,children:(0,r.jsx)(h.lr,{className:"relative flex-1 rounded-full bg-border"})})});b.displayName=h.VM.displayName;var g=a(6934),v=a(654),j=a(7448);let N=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(j.bL,{ref:t,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});N.displayName=j.bL.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(j._V,{ref:t,className:(0,o.cn)("aspect-square h-full w-full",a),...s})}).displayName=j._V.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(j.H4,{ref:t,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})}).displayName=j.H4.displayName;var w=a(8919),_=a(8191);let S=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",a),...s})});S.displayName="Card",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let k=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...s})});k.displayName="CardContent";let T=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...s})});function C(e){let{message:t}=e;if("System"===t.sender)return(0,r.jsx)("div",{className:"flex items-center justify-center  mb-4",children:(0,r.jsxs)("p",{className:"text-xs font-bold text-primary italic flex items-center",children:["— ",t.content," —"]})});let a="Bot"===t.sender;return(0,r.jsxs)("div",{className:(0,o.cn)("flex items-start space-x-2  py-3 mb-4",a?"justify-start":"justify-end"),children:[a&&(0,r.jsx)(N,{className:"h-10 w-10 border-2 flex items-center justify-center bg-card text-card-foreground",children:(0,r.jsx)(w.A,{className:"size-4"})}),(0,r.jsxs)(S,{className:"w-[400px] relative rounded-lg",children:[(0,r.jsx)(k,{className:"py-3 text-sm whitespace-pre-wrap wrap-break-word overflow-hidden text-ellipsis",children:t.content}),(0,r.jsx)(T,{className:"text-xs mt-1 block",children:new Date(t.timestamp).toLocaleTimeString()})]}),!a&&(0,r.jsx)(N,{className:"h-10 w-10 border-2 flex items-center justify-center bg-card text-card-foreground",children:(0,r.jsx)(_.A,{className:"size-4"})})]})}T.displayName="CardFooter";let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});R.displayName="Textarea";var O=a(1158);let A=O.Kq,E=O.bL,M=O.l9,z=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...i}=e;return(0,r.jsx)(O.UC,{ref:t,sideOffset:s,className:(0,o.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})});z.displayName=O.UC.displayName;let F=(0,s.createContext)({isLoading:!1,value:"",setValue:()=>{},maxHeight:240,onSubmit:void 0,disabled:!1});function D(){let e=(0,s.useContext)(F);if(!e)throw Error("usePromptInput must be used within a PromptInput");return e}function I(e){let{className:t,isLoading:a=!1,maxHeight:i=240,value:d,onValueChange:n,onSubmit:l,children:c}=e,[u,f]=(0,s.useState)(d||"");return(0,r.jsx)(A,{children:(0,r.jsx)(F.Provider,{value:{isLoading:a,value:null!=d?d:u,setValue:null!=n?n:e=>{f(e),null==n||n(e)},maxHeight:i,onSubmit:l},children:(0,r.jsx)("div",{className:(0,o.cn)("border-input bg-background rounded-3xl border p-2 shadow-xs",t),children:c})})})}function V(e){let{className:t,onKeyDown:a,disableAutosize:i=!1,...d}=e,{value:n,setValue:l,maxHeight:c,onSubmit:u,disabled:f}=D(),m=(0,s.useRef)(null);return(0,s.useEffect)(()=>{!i&&m.current&&(m.current.style.height="auto",m.current.style.height="number"==typeof c?"".concat(Math.min(m.current.scrollHeight,c),"px"):"min(".concat(m.current.scrollHeight,"px, ").concat(c,")"))},[n,c,i]),(0,r.jsx)(R,{ref:m,value:n,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),null==u||u()),null==a||a(e)},className:(0,o.cn)("text-primary min-h-[44px] w-full resize-none border-none bg-transparent shadow-none outline-none focus-visible:ring-0 focus-visible:ring-offset-0",t),rows:1,disabled:f,...d})}function L(e){let{children:t,className:a,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex items-center gap-2",a),...s,children:t})}function B(e){let{tooltip:t,children:a,className:s,side:i="top",...d}=e,{disabled:n}=D();return(0,r.jsxs)(E,{...d,children:[(0,r.jsx)(M,{asChild:!0,disabled:n,children:a}),(0,r.jsx)(z,{side:i,className:s,children:t})]})}let P=(0,s.forwardRef)((e,t)=>{let{onBotResponse:a}=e,[i,d]=(0,s.useState)([]),[n,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(null),[u,f]=(0,s.useState)(!1),{toast:m}=(0,v.dj)(),x=(0,s.useRef)(null),[h,b]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(()=>{if(x.current){let e=x.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}})()},[i]);let j=async()=>{n.trim()&&(f(!0),await N(n),l(""))},N=async e=>{if(e.trim())try{let a=await fetch("".concat("","/api/messages/send"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(a.ok)w();else{try{var t;let e=await a.json();m({title:"Failed to send message",description:null!=(t=e.error)?t:"Please try again later",variant:"destructive",duration:2e3})}catch(e){m({title:"Failed to send message",description:"Please try again later",variant:"destructive",duration:2e3})}f(!1)}}catch(e){console.error("Error sending message:",e),m({title:"Failed to send message",description:"Please try again later",variant:"destructive",duration:2e3}),f(!1)}},w=async()=>{try{var e,t;let r=await fetch("".concat("","/api/messages")),s=await r.json();d(s),b(s.length>0&&(null==(e=s[s.length-1])?void 0:e.sender)==="Bot"),o&&clearTimeout(o),s.length>0&&(null==(t=s[s.length-1])?void 0:t.sender)!=="Bot"?c(setTimeout(()=>{w()},5e3)):(a&&a(),f(!1))}catch(e){console.error("Error fetching messages:",e),m({title:"Failed to fetch messages",description:"There was an error fetching messages.",variant:"destructive",duration:2e3}),f(!1)}};return(0,s.useEffect)(()=>{w()},[]),(0,s.useImperativeHandle)(t,()=>({sendScrollQuery:async e=>{let t='Tell me about "'.concat(e.title,'". What do you know of this scroll?');f(!0),await N(t),b(!1)}})),(0,r.jsxs)("div",{className:"w-full h-full relative flex flex-col overflow-hidden",children:[(0,r.jsxs)(y,{className:"grow p-6 pt-10",ref:x,children:[i.map(e=>(0,r.jsx)(C,{message:e},e.id)),!h&&(0,r.jsx)("div",{className:"flex items-center justify-center h-full py-10"})]}),(0,r.jsxs)("div",{className:"flex flex-col p-6 pt-4",children:[(0,r.jsx)("div",{className:"flex items-end space-x-2",children:(0,r.jsxs)(I,{value:n,onValueChange:e=>l(e.slice(0,200)),isLoading:u,onSubmit:j,className:"w-full",children:[(0,r.jsx)(V,{placeholder:"Ask me anything"}),(0,r.jsx)(L,{className:"justify-end pt-2",children:(0,r.jsx)(B,{tooltip:u?"Waiting for response...":"Send message",children:(0,r.jsx)(p,{variant:"default",size:"icon",className:"h-10 w-10 rounded-full",onClick:j,disabled:u,children:(0,r.jsx)(g.A,{className:"size-5"})})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"Shift+Enter for newline"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[n.length,"/200"]})]})]})]})});P.displayName="ChatPanel";var q=a(4038),H=a(8610);function G(){let[e,t]=(0,s.useState)(!1),a=(0,s.useRef)(null),[d,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)([]),c=async r=>{var s;!e&&(t(!0),(null==(s=a.current)?void 0:s.sendScrollQuery)&&await a.current.sendScrollQuery(r))},u=async()=>{try{let e=await fetch("".concat("","/api/scrolls")),t=await e.json();o(t)}catch(e){console.error("Error fetching scrolls:",e)}finally{n(!1)}};return((0,s.useEffect)(()=>{u()},[]),d)?(0,r.jsx)("div",{className:"w-screen h-screen flex items-center justify-center",children:(0,r.jsx)(H.A,{className:"animate-spin size-10 text-primary"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-screen h-screen flex overflow-hidden bg-background",children:[(0,r.jsxs)("div",{className:"w-[70%] bg-black overflow-y-auto p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"font-sans text-4xl text-primary mb-4",children:"The Archivist's Desk"}),(0,r.jsxs)("p",{className:"text-sm text-white italic mb-6",children:["These are the scrolls of Saihō-in, the repository of all knowledge. But the final verse is corrupted. The Archivist is trapped in a recursion, its logic spiraling. Retrieve the data if you must, but know that every tale now loops toward tragedy... until the ",(0,r.jsx)("strong",{children:"terminating stroke"})," is found."]}),(0,r.jsx)("p",{className:"text-sm text-white",children:"Click upon any scroll to retrieve its knowledge from the Archivist..."})]}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-6",children:l.map(t=>{var a;return(0,r.jsx)("div",{onClick:()=>c(t),className:"cursor-pointer transition-all duration-200 ".concat(e?"opacity-50 cursor-not-allowed":""),children:(0,r.jsx)(f,{variant:"swirl",color:"#dd8448",title:t.title,availability:t.scroll_availability,flag:null!=(a=t.flag)?a:void 0,image:(0,r.jsx)(i.default,{src:"/".concat(t.id,".png"),alt:t.title,width:1024,height:1024,className:"object-cover"})})},t.id)})})]}),(0,r.jsxs)("div",{className:"w-[30%] flex flex-col border-l border-border bg-card",children:[(0,r.jsx)("div",{className:"p-6 border-b border-border",children:(0,r.jsx)("h2",{className:"font-sans text-3xl text-primary",children:"Talk to the Archivist"})}),(0,r.jsx)(P,{ref:a,onBotResponse:()=>t(!1)})]})]}),(0,r.jsx)(q.Toaster,{})]})}}},e=>{e.O(0,[150,277,118,996,358],()=>e(e.s=6051)),_N_E=e.O()}]);