<section class="grid-gap">
  <article class="card-glass">
    <h1 class="h1">Book a Ticket</h1>
    <p class="muted">
      Buses are sourced from <%= ENV["LOGIC_TRACKER_URL"].present? ? "Logic Tracker" : "mock data" %>.
    </p>

    <%= form_with model: @ticket, url: tickets_path, class: "form-grid" do |f| %>
      <%= f.hidden_field :name, value: @ticket.name %>
      
      <p class="muted">
        Ticket will be created as <strong><%= @ticket.name %></strong>.
      </p>

      <label>Bus
        <%= f.select :bus_code,
              options_for_select(@buses.map { |b|
                ["Bus #{b[:code]} (#{b[:start_id]} â†’ #{b[:end_id]})", b[:code]]
              }),
              { prompt: "Choose a bus" },
              class: "select-glass custom-select", required: true %>
      </label>

      <label>Travel date
        <%= f.date_field :travel_date, required: true %>
      </label>

      <label>Seats
        <%= f.number_field :seats, min: 1, value: 1, required: true %>
      </label>

      <%= f.submit "Book ticket", class: "btn-primary" %>
    <% end %>
  </article>
</section>
